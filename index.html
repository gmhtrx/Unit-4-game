<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <title>Crystal Game</title>
</head>

<body>


    <div id="crystals">

    </div>

    <script src="assets/javascript/jquery.min.js"></script>
    <script type="text/javascript">
        var wins = 0;
        var losses = 0;
        
        var images = ["assets/images/diamond.png", "assets/images/emerald.png", "assets/images/gold.png", "assets/images/Silver.png" ];
        
        var r = "ready to play";


        var game = new Crystal;

        $(".crystal-image").on("click", function() {
            var x = ($(this).attr("data-crystalvalue"));
            if (!game.gameover) {
            game.addCrystals(x);
            }
        });
        
        function Crystal() {
            this.numberOptions = [];
            this.gameover = false;
            this.userScore = 0;
            alert(r);
            this.crystalValue = Math.floor(Math.random() * 102 + 19);
            for (var j = 0; j < 4; j++){
                this.userCrystalValues = Math.floor(Math.random() * 12 + 1);
                this.numberOptions[j] = this.userCrystalValues;
            }
            console.log(this.numberOptions);
            console.log(this.crystalValue);
            for (var i = 0; i < this.numberOptions.length; i++) {

                var imageCrystal = $("<img>");

                imageCrystal.addClass("crystal-image");

                imageCrystal.attr("src", images[i]);

                imageCrystal.attr("data-crystalvalue", this.numberOptions[i]);

                $("#crystals").append(imageCrystal);           
            }
        }

        Crystal.prototype.addCrystals = function(x) {
        x = parseInt(x);
        
        this.userScore+= x;
        console.log(this.userScore);
        // We then add the crystalValue to the user's "counter" which is a global variable.
        // Every click, from every crystal adds to the global counter.
        // All of the same game win-lose logic applies. So the rest remains unchanged.
        alert("New score: " + this.userScore);

        if (this.userScore === this.crystalValue) {
        alert("You win!");
        }

        else if (this.userScore >= this.crystalValue) {
        alert("You lose!!");
        }
        };
    

    </script>
    
    
</body>

</html>